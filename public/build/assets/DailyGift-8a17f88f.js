import{c as V,u as H,r as i,g as h,h as o,j as e,C as E}from"./app-510cf451.js";import{C as g}from"./crown-a686e901.js";import{C as z}from"./calendar-3bdbeb89.js";import{T as k}from"./timer-291fd6f9.js";import{G as B}from"./gift-afa5557a.js";import{I as M}from"./info-c2590b7e.js";import{S as Y}from"./star-010203df.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=V("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=V("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),ee=()=>{const{user:b,isAuthenticated:j,loading:u}=H(),[N,G]=i.useState({normal:[],vip:[]}),[m,S]=i.useState(""),[v,$]=i.useState([]),[Q,y]=i.useState(!1),[q,f]=i.useState(!1),[d,A]=i.useState({currentVip:1}),[c,U]=i.useState(3),[x,w]=i.useState("normal");i.useEffect(()=>{!u&&j&&b&&C()},[u,j,b]);const C=async()=>{var s,r;try{y(!0);const[t,l,a]=await Promise.all([h.getDailyGifts(),h.getUserCharacters(),h.getVipInfo()]);G(t.data),$(l.data),A(a.data)}catch(t){o.error(((r=(s=t.response)==null?void 0:s.data)==null?void 0:r.error)||"Có lỗi xảy ra khi tải dữ liệu")}finally{y(!1)}},D=async s=>{var r,t;if(!m){o.error("Vui lòng chọn nhân vật!");return}try{f(!0),(await h.claimGift({gift_code:s,character_id:m})).data.success&&(o.success("Nhận quà thành công!"),C())}catch(l){o.error(((t=(r=l.response)==null?void 0:r.data)==null?void 0:t.error)||"Có lỗi xảy ra khi nhận quà")}finally{f(!1)}},p=x==="normal"?N.normal:N.vip;if(u||Q)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent"})});const _=({day:s,isToday:r,isPast:t,claimed:l,giftInfo:a,isVip:n,onClaimGift:L,isLoading:R,selectedCharacter:T})=>e.jsxs("div",{className:"relative pl-20 pb-8",children:[e.jsx("div",{className:`
            absolute left-6 w-4 h-4 rounded-full border-4 z-10
            ${l?"border-green-500 bg-white":r?"border-blue-500 bg-white animate-pulse":"border-gray-300 bg-gray-100"}
        `}),e.jsxs("div",{className:`
            bg-white rounded-xl p-6 shadow-sm
            ${r?"ring-2 ring-blue-500":""}
            hover:shadow-md transition-shadow
        `,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:`
                            w-16 h-16 rounded-xl flex items-center justify-center relative
                            ${r?"bg-blue-100":"bg-gray-100"}
                            overflow-hidden
                        `,children:[a!=null&&a.image_url?e.jsx("img",{src:a.image_url,alt:`Quà ngày ${s}`,className:"w-full h-full object-cover"}):e.jsx("img",{src:"/api/placeholder/64/64",alt:"Gift placeholder",className:"w-full h-full object-cover opacity-50"}),e.jsx("div",{className:"absolute bottom-0 right-0 bg-white/90 px-2 py-0.5 text-sm font-medium rounded-tl-lg",children:s})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:n?`Quà VIP Ngày ${s}`:`Quà Ngày ${s}`}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:(a==null?void 0:a.name)||(n?"Premium Gift Box":"Standard Gift Box")}),(a==null?void 0:a.description)&&e.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:a.description})]})]}),e.jsx("div",{children:l?e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm text-green-700 bg-green-100",children:[e.jsx(K,{className:"w-4 h-4 mr-1"}),"Đã nhận"]}):r?e.jsx("button",{onClick:()=>L(n?`VIPDAY${s}`:`DAY${s}`),disabled:R||!T,className:`
                                px-4 py-2 rounded-lg font-medium text-white
                                ${n?"bg-amber-500 hover:bg-amber-600":"bg-blue-600 hover:bg-blue-700"}
                                disabled:opacity-50 disabled:cursor-not-allowed
                                transition-colors
                            `,children:"Nhận Quà"}):e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm text-gray-600 bg-gray-100",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),t?"Đã qua":"Sắp mở"]})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4 text-amber-500"}),(a==null?void 0:a.quantity)||1,"x ",(a==null?void 0:a.type)||"Hộp Quà"]}),n&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-amber-500"}),"VIP Exclusive"]}),(a==null?void 0:a.rarity)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4 text-amber-500"}),a.rarity]})]})})]})]});return e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-blue-600 rounded-xl",children:e.jsx("div",{className:"px-6 py-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Điểm Danh Nhận Quà"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-white bg-white/20 px-3 py-1 rounded-full",children:[e.jsx(g,{className:"w-4 h-4"}),e.jsxs("span",{children:["VIP ",d.currentVip]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-white bg-white/20 px-3 py-1 rounded-full",children:[e.jsx(z,{className:"w-4 h-4"}),e.jsxs("span",{children:["Ngày ",c,"/7"]})]})]})]}),e.jsxs("select",{className:"px-4 py-2 rounded-lg bg-white text-gray-700 border-0 focus:ring-2 focus:ring-white/50",value:m,onChange:s=>S(s.target.value),children:[e.jsx("option",{value:"",children:"Chọn nhân vật (Cấp 108+)"}),v.map(s=>e.jsx("option",{value:s.unique_id,children:s.chr_name},s.unique_id))]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-emerald-50 rounded-xl p-6 border-2 border-emerald-200",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2 text-emerald-800",children:[e.jsx(k,{className:"w-5 h-5"}),"Chuỗi Điểm Danh"]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx("div",{className:"w-full bg-emerald-100 rounded-full h-2.5",children:e.jsx("div",{className:"bg-emerald-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${c/7*100}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-emerald-800 font-medium",children:[c,"/7 ngày"]}),e.jsxs("span",{className:"text-emerald-600",children:["Còn ",7-c," ngày"]})]})]})]}),e.jsxs("div",{className:"bg-amber-50 rounded-xl p-6 border-2 border-amber-200",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2 text-amber-800",children:[e.jsx(g,{className:"w-5 h-5"}),"Tiến Trình VIP"]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx("div",{className:"w-full bg-amber-100 rounded-full h-2.5",children:e.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${d.currentVip/7*100}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-amber-800 font-medium",children:["VIP ",d.currentVip]}),e.jsxs("span",{className:"text-amber-600",children:[d.xuNeeded," xu → VIP ",d.currentVip+1]})]})]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl p-6 border-2 border-purple-200",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2 text-purple-800",children:[e.jsx(P,{className:"w-5 h-5"}),"Thống Kê"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-purple-100 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-800",children:"12"}),e.jsx("div",{className:"text-sm text-purple-600",children:"Quà đã nhận"})]}),e.jsxs("div",{className:"bg-purple-100 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-800",children:v.length}),e.jsx("div",{className:"text-sm text-purple-600",children:"Nhân vật"})]})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:`px-6 py-3 rounded-lg font-medium transition-all ${x==="normal"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>w("normal"),children:"Quà Thường"}),e.jsx("button",{className:`px-6 py-3 rounded-lg font-medium transition-all ${x==="vip"?"bg-amber-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>w("vip"),children:"Quà VIP"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-200"}),[1,2,3,4,5,6,7].map(s=>{const r=c+1===s,t=s<=c,l=p==null?void 0:p.find(n=>n.day===s),a=(l==null?void 0:l.already_claimed)||!1;return e.jsx(_,{day:s,isToday:r,isPast:t,claimed:a,giftInfo:l,isVip:x==="vip",onClaimGift:D,isLoading:q,selectedCharacter:m},s)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"font-semibold mb-6 text-gray-800 flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5 text-blue-600"}),"Phần Quà Gần Đây"]}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50 px-4 rounded-lg transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg overflow-hidden",children:e.jsx("img",{src:"/api/placeholder/48/48",alt:`Quà ngày ${s}`,className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-800",children:["Quà Ngày ",s]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Đã nhận vào 09:15"})]})]}),s===1?e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-600 text-white",children:"Hôm nay"}):e.jsx("span",{className:"text-sm text-gray-500",children:s===2?"Hôm qua":"2 ngày trước"})]},s))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(M,{className:"w-5 h-5 text-blue-600"})}),e.jsx("h3",{className:"font-semibold text-gray-800",children:"Thông tin điểm danh"})]}),e.jsx("ul",{className:"grid gap-4",children:["Điểm danh đủ 3 ngày liên tiếp nhận thêm phần quà đặc biệt","Điểm danh đủ 7 ngày liên tiếp nhận Hộp Quà Hiếm","Reset điểm danh vào 00:00 hàng ngày","Người chơi VIP nhận thêm phần quà VIP hàng ngày"].map((s,r)=>e.jsxs("li",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:e.jsx(E,{className:"w-4 h-4 text-blue-600"})}),s]},r))})]})]})};export{ee as default};
